ðŸ“¦ Webel Stage-2 HARD-VERIFY v3 (Weighted)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ë„ˆëŠ” ì§€ê¸ˆë¶€í„° ì•„ëž˜ ê°€ì¤‘ì¹˜(Weight)ì— ë”°ë¼ **Stage-2**ë¥¼
ì™„ì „ížˆ ìž¬ì„¤ì •í•˜ê³  â€œì§„ì§œâ€ ë¶€í•˜Â·ì„±ëŠ¥Â·ë¬´ê²°ì„± í…ŒìŠ¤íŠ¸ë¥¼
ìžë™í™”(CI)ë¡œ í†µê³¼í•´ì•¼ë§Œ Stage-3 ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìžˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. ê°€ì¤‘ì¹˜ ì²´ê³„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
| Weight | ì˜ë¯¸                    | ì°©ìˆ˜ ì¡°ê±´                |
|--------|-------------------------|--------------------------|
| **5**  | Critical (í•„ìˆ˜)         | ì¦‰ì‹œ ìˆ˜í–‰Â·í†µê³¼í•´ì•¼ í•¨    |
| **4**  | High (í•„ìˆ˜)             | Weight 5 ëª¨ë‘ Green í›„   |
| **3**  | Medium (í’ˆì§ˆ í–¥ìƒ)      | Weight 4 í†µê³¼ í›„         |
| **2**  | Low (ë¬¸ì„œÂ·ì‹œê°í™”)       | Weight 3 í†µê³¼ í›„         |
| **1**  | Nice-to-have (ì„ íƒ)     | ìµœì¢… QA í›„ í•„ìš” ì‹œ       |

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2. ìž‘ì—… í•­ëª© + ê°€ì¤‘ì¹˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
### ðŸŸ¥ Weight 5 â€” Critical
1. **placeholder íŒŒì¼ ì „ë¶€ ì œê±°(git rm performance/\*)**
2. **GitHub Action ë‚´ë¶€ì—ì„œ k6Â·LighthouseÂ·Sentry ì§ì ‘ ì‹¤í–‰**
3. **verify_stage2.mjs**  
   - k6 `http_req_failed.rate â‰¤ 0.001`  
   - Lighthouse score â‰¥ 90 (ëª¨ë°”ì¼Â·ë°ìŠ¤í¬í†±)  
   - Sentry PNG SHA-256 = `$SENTRY_REF_HASH`  
   - placeholder ë¬¸ìžì—´(`urandom|PLACEHOLDER`) ì¡´ìž¬ ì‹œ FAIL  
   - íŒŒì¼ ìµœì†Œ í¬ê¸°: JSON â‰¥ 5 KB, HTML â‰¥ 50 KB, PNG â‰¥ 10 KB

### ðŸŸ§ Weight 4 â€” High
4. Action ì‹¤íŒ¨ 3íšŒ ì—°ì† ì‹œ `HELP NEEDED` ë©”ì‹œì§€ í›„ ì¤‘ë‹¨  
5. ì‹¤ì œ í…ŒìŠ¤íŠ¸ í†µê³¼ í›„ `Stage-2 REAL PASS` ì»¤ë°‹ + PR â†’ main

### ðŸŸ¨ Weight 3 â€” Medium
6. `performance/bottleneck-analysis.md` â€“ ë³‘ëª© ì›ì¸Â·í•´ê²° ìš”ì•½  
7. `performance/database-optimization-report.md` â€“ before/after ì¿¼ë¦¬ ms

### ðŸŸ© Weight 2 â€” Low
8. `performance/summary.md` ì— k6/Lighthouse ê²°ê³¼ ê·¸ëž˜í”„Â·í‘œ ì‚½ìž…

### ðŸŸ¦ Weight 1 â€” Nice-to-have
9. `performance/README.md` â€“ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë°©ë²•Â·CI ì„¤ëª… ì¶”ê°€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
3. GitHub Action (.github/workflows/verify-stage2.yml)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```yaml
name: Stage-2 Real Test
on: [workflow_dispatch]          # ìˆ˜ë™ íŠ¸ë¦¬ê±°

env:
  STAGING_HOST: ${{ secrets.STAGING_URL }}
  SENTRY_DSN:   ${{ secrets.SENTRY_DSN }}
  SENTRY_REF_HASH: ${{ secrets.SENTRY_HASH }}

jobs:
  real-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install k6 & Lighthouse
        run: |
          sudo apt-get update -y
          sudo apt-get install -y k6 chromium-browser
          npm i -g lighthouse

      - name: Run k6
        run: |
          mkdir -p performance
          k6 run --vus 10 --duration 5m \
            --out json=performance/basic-load-raw.json \
            performance/basic-load-test.js
          k6 run --vus 10 --duration 2m \
            --out json=performance/upload-stress-raw.json \
            performance/upload-stress-test.js

      - name: Run Lighthouse (desktop & mobile)
        run: |
          lighthouse https://$STAGING_HOST \
            --output html --output-path performance/lh-desktop.html \
            --quiet --chrome-flags="--headless"
          lighthouse https://$STAGING_HOST \
            --output html --output-path performance/lh-mobile.html \
            --preset=mobile --quiet --chrome-flags="--headless"

      - name: Capture Sentry screenshot
        run: node scripts/capture-sentry.js   # PNG ì €ìž¥Â·í•´ì‹œ ì¶œë ¥

      - name: Verify Stage-2
        run: node performance/verify_stage2.mjs
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
4. verify_stage2.mjs í•µì‹¬ ë¡œì§ (ìš”ì•½)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

js
ë³µì‚¬
íŽ¸ì§‘
import fs from "fs/promises";
import crypto from "crypto";
import load from "./basic-load-raw.json" assert { type:"json" };
if (load.metrics.http_req_failed.rate > 0.001) exit("k6 error rate");

const html = await fs.readFile("performance/lh-mobile.html","utf8");
const score = parseInt(html.match(/lh-gauge__percentage">(\d+)</)[1]);
if (score < 90) exit("Lighthouse mobile < 90");

const png = await fs.readFile("performance/sentry-screenshot.png");
const hash = crypto.createHash("sha256").update(png).digest("hex");
if (hash !== process.env.SENTRY_REF_HASH) exit("Sentry hash mismatch");

console.log("ALL CHECKS PASS");
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5. ìˆ˜í–‰ ì ˆì°¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Weight 5 í•­ëª©ë¶€í„° ìž‘ì—… â†’ Action ë…¹ìƒ‰ & ALL CHECKS PASS ì¶œë ¥

Weight 4 í•­ëª© ì´í–‰ í›„ Stage-2 REAL PASS PR

ì´í›„ Weight 3 â†’ 2 â†’ 1 ìˆœì„œë¡œ ì„ íƒì  í’ˆì§ˆ ê°œì„ 

Stage-2 REAL PASS ë¨¸ì§€ í›„ ìƒˆ ë¸Œëžœì¹˜ stage-3-multilang-search ì°©ìˆ˜

(ì¶”ê°€ ìŠ¹ì¸ ë¶ˆí•„ìš” â€“ ê°€ì¤‘ì¹˜ ë†’ì€ ìž‘ì—…ë¶€í„° ìˆœì°¨ë¡œ ì‹¤í–‰í•˜ë¼)