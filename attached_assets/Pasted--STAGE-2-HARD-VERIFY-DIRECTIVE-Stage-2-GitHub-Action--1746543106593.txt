== ğŸ”’ STAGE-2 HARD VERIFY DIRECTIVE ==
Stage-2 ë¥¼ **ìë™ìœ¼ë¡œ íŒ¨ìŠ¤/ì‹¤íŒ¨** íŒë‹¨í•˜ëŠ” GitHub Action + ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ë¼.  
ì•„ë˜ â€œHARD-VERIFY ìŠ¤í¬ë¦½íŠ¸â€ì—ì„œ í•œ í•­ëª©ì´ë¼ë„ FAIL ì´ë©´ Stage-2 ì™„ë£Œ ì„ ì–¸ ê¸ˆì§€.

### 1. ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ (performance/verify_stage2.mjs)
```js
import fs from "fs/promises";
import { execSync } from "child_process";

function fileMustExist(path, minBytes=1024){
  try{
    const stat = execSync(`wc -c < ${path}`).toString().trim();
    if (parseInt(stat) < minBytes) throw new Error(`${path} too small`);
    console.log("PASS", path);
  }catch(e){ console.error("FAIL", path, e.message); process.exit(1); }
}

// k6 raw logs â‰¥ 1 KB
fileMustExist("performance/basic-load-raw.json");
fileMustExist("performance/upload-stress-raw.json");

// Lighthouse HTML â‰¥ 50 KB & í¬í•¨ëœ â€œPerformance scoreâ€
fileMustExist("performance/lh-desktop.html", 50_000);
fileMustExist("performance/lh-mobile.html", 50_000);

// summary.md ì— Error Rate ìˆ˜ì¹˜ â‰¤ 0.1%
const summary = await fs.readFile("performance/summary.md","utf8");
const m = summary.match(/Error Rate.*?([0-9.]+)%/i);
if(!m || parseFloat(m[1])>0.1){ console.error("FAIL Error Rate"); process.exit(1); }
console.log("PASS Error Rate");

// Sentry ìŠ¤í¬ë¦°ìƒ· â‰¥ 10 KB
fileMustExist("performance/sentry-screenshot.png", 10_000);

console.log("ALL CHECKS PASS");
2. GitHub Action (.github/workflows/verify-stage2.yml)
yaml
ë³µì‚¬
í¸ì§‘
name: Verify Stage 2
on:
  push:
    branches: [stage-2-*]
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Node verify
        uses: actions/setup-node@v4
      - run: node performance/verify_stage2.mjs
3. í†µê³¼ ê¸°ì¤€
verify-stage2 ì›Œí¬í”Œë¡œê°€ ë…¹ìƒ‰ì´ê³  ALL CHECKS PASS ë¡œê·¸ ì¶œë ¥

ê·¸ í›„ stage-2-* ë¸Œëœì¹˜ë¥¼ PR â†’ main, ì œëª©ì— â€œStage 2 HARD-VERIFY PASSâ€

4. ì‘ì—… ìˆœì„œ
í•„ìš”í•œ k6Â·LighthouseÂ·Sentry ì‹¤ë°ì´í„° ë‹¤ì‹œ ìƒì„± (ë¹ˆÂ·ì„ì˜ ë°ì´í„° NO)

ìœ„ ìŠ¤í¬ë¦½íŠ¸ & ì›Œí¬í”Œë¡œ ì¶”ê°€ â†’ ì»¤ë°‹

í™•ì¸ìš© PR ìƒì„± â†’ Action í†µê³¼

í†µê³¼í•˜ë©´ ìë™ìœ¼ë¡œ â€œâœ” Stage 2 DONE â€” HARD-VERIFY PASSâ€ ë©”ì‹œì§€ ë‚¨ê¸°ê³  Stage 3 ì‹œì‘

(ë‚´ ì¶”ê°€ ìŠ¹ì¸ ë¶ˆí•„ìš”. Action ì‹¤íŒ¨ ì‹œ Stage 2 ê³„ì† ë°˜ë³µ)

markdown
ë³µì‚¬
í¸ì§‘

---

**í•µì‹¬ í¬ì¸íŠ¸**

1. **íŒŒì¼ í¬ê¸° ì²´í¬** â†’ ë¹ˆ íŒŒì¼Â·í”Œë ˆì´ìŠ¤í™€ë” ìë™ ì°¨ë‹¨  
2. **Error Rate íŒŒì‹±** â†’ 0.1 % ë„˜ìœ¼ë©´ ì‹¤íŒ¨  
3. **GitHub Action** â†’ ì‚¬ëŒ ê°œì… ì—†ì´ë„ _Pass/Fail_ í™•ì •  
4. Stage-2 ë¸Œëœì¹˜ê°€ Action í†µê³¼í•´ì•¼ë§Œ â€˜ì™„ë£Œâ€™ ì„ ì–¸ ê°€ëŠ¥